---
layout: post
title: åŠ¨æ€ç”ŸæˆCSSè½®æ’­åŠ¨ç”»
key: 20221022
tags:
  - èœ»èœ“åˆ‡
  - Web
  - åŠ¨æ€CSSè½®æ’­åŠ¨ç”»
---

<!-- æ·»åŠ ç›®å½• http://blog.csdn.net/hengwei_vc/article/details/47122103 -->
<script src="/javascripts/jquery-2.1.4.min.js" type="text/javascript"></script>
<script src="/javascripts/toc.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#toc').toc();
}); </script>
<div id="toc"></div>
<img style="border-radius: 15px;box-shadow: darkgrey 0px 0px 10px 5px" src="https://shengshuqiang.github.io/assets/carouselCSSAnimationCover.png"/><br><br>1. å®ç°è½®æ’­åŠ¨æ•ˆï¼Œæ¯ä¸ªå±•ä½æ˜¾ç¤º3sï¼Œç„¶å0.5sæ»šåŠ¨åˆ°ä¸‹ä¸€ä¸ªå±•ä½ï¼Œä¾æ¬¡å¾ªç¯æ’­æ”¾ã€‚<br>2. å±•ä½ä¸ªæ•°æ˜¯æœåŠ¡ç«¯ä¸‹å‘çš„ä»»æ„æ•°é‡ã€‚<br> æœ¬æ–‡å°è¯•ä¸€æ­¥ä¸€ä¸ªè„šå°ç»™ä½ å‘ˆç°å¦‚ä½•å¹²å¾—æ¼‚äº®ã€‚
{:.info}
<!--more-->

**é˜…è¯»åŸæ–‡ï¼š**[**åŠ¨æ€ç”ŸæˆCSSè½®æ’­åŠ¨ç”»**](https://mp.weixin.qq.com/s/x2CS69-o9AFdHoCnFmiRAQ)

å®ç°è½®æ’­åŠ¨æ•ˆï¼Œæ¯ä¸ªå±•ä½æ˜¾ç¤º3sï¼Œç„¶å0.5sæ»šåŠ¨åˆ°ä¸‹ä¸€ä¸ªå±•ä½ï¼Œä¾æ¬¡å¾ªç¯æ’­æ”¾ã€‚
å±•ä½ä¸ªæ•°æ˜¯æœåŠ¡ç«¯ä¸‹å‘çš„ä»»æ„æ•°é‡ã€‚
æœ¬æ–‡å°è¯•ä¸€æ­¥ä¸€ä¸ªè„šå°ç»™ä½ å‘ˆç°å¦‚ä½•å¹²å¾—æ¼‚äº®ã€‚

# éœ€æ±‚

1. å®ç°è½®æ’­åŠ¨æ•ˆï¼Œæ¯ä¸ªå±•ä½æ˜¾ç¤º3sï¼Œç„¶å0.5sæ»šåŠ¨åˆ°ä¸‹ä¸€ä¸ªå±•ä½ï¼Œä¾æ¬¡å¾ªç¯æ’­æ”¾ã€‚
2. å±•ä½ä¸ªæ•°æ˜¯æœåŠ¡ç«¯ä¸‹å‘çš„ä»»æ„æ•°é‡ã€‚

![](https://shengshuqiang.github.io/assets/carousel.gif)

# æ€è·¯

2. å®ç°å›ºå®šå±•ä½ä¸ªæ•°çš„é™æ€è½®æ’­CSSåŠ¨ç”»ã€‚
2. å®ç°ä»»æ„å±•ä½ä¸ªæ•°çš„åŠ¨æ€è½®æ’­CSSåŠ¨ç”»ã€‚

# åŠ¨ä½œ

## å›ºå®šå±•ä½ä¸ªæ•°è½®æ’­é™æ€CSSåŠ¨ç”»

ä¼—æ‰€å‘¨çŸ¥ï¼Œå¸§åŠ¨ç”»å¯ä»¥æ§åˆ¶ä¸åŒå¸§çš„æ ·å¼ï¼Œç®€å•åœ¨èœé¸ŸDemoå¯ä»¥çœ‹åˆ°ï¼Œè¯¦è§å¦‚ä¸‹[keyframesåŠ¨ç”»ç¤ºä¾‹](https://shengshuqiang.github.io/assets/h5/keyframesAnimation1.html)ï¼š
<br>![](https://shengshuqiang.github.io/assets/keyframesAnimation1.gif)
<br>![](https://shengshuqiang.github.io/assets/keyframesAnimation1.png)


ä¸Šé¢å¸§æ˜¯ä¸€ç›´åœ¨æ»šåŠ¨ï¼Œå¹¶ä¸æ˜¯éœ€æ±‚ä¸­è¦æ±‚çš„åœä¸‹å±•ç¤ºä¸€ä¼šå†æ»šåŠ¨ã€‚çµæœºä¸€åŠ¨ï¼Œä¸¤å¸§ç›´æ¥ä¸äº§ç”Ÿä½ç§»ä¸å°±å¯ä»¥åšåˆ°åœä¸‹å±•ç¤ºäº†ä¹ˆï¼Ÿç›´æ¥å›ºå®šçˆ¶å¸ƒå±€ä½œä¸ºè§†çª—ï¼Œè¶…å‡ºéšè—ï¼Œå³ overflow: hiddenã€‚è¯¦è§å¦‚ä¸‹[keyframes&åœä¸‹å†æ»šåŠ¨åŠ¨ç”»ç¤ºä¾‹](https://shengshuqiang.github.io/assets/h5/keyframesStopAnimation2.html)ï¼š
<br>![](https://shengshuqiang.github.io/assets/keyframesStopAnimation2.gif)
<br>![](https://shengshuqiang.github.io/assets/keyframesStopAnimation2.png)


ä¸Šé¢å¸§æ˜¯ä¸€ä¸ªå¤§é•¿æ¡åœ¨æ»šåŠ¨ï¼Œå’Œè½®æ’­ä¸æ˜¯ä¸€å›äº‹ã€‚è¿™ä¹Ÿéš¾ä¸å€’æˆ‘ï¼Œå¦‚æœæŠŠè§†çª—å›ºå®šï¼Œè®©å¤§é•¿æ¡ä»è§†çª—å‰æ»šåŠ¨ï¼Œå¯ä¸å°±æ˜¯è½®æ’­æ•ˆæœä¹ˆã€‚è¯¦è§å¦‚ä¸‹[keyframes&åœä¸‹å†æ»šåŠ¨&è¶…å‡ºä¸æ˜¾ç¤ºåŠ¨ç”»ç¤ºä¾‹](https://shengshuqiang.github.io/assets/h5/keyframesStopOverflowAnimation3.html)
<br>![](https://shengshuqiang.github.io/assets/keyframesStopOverflowAnimation3.gif)
<br>![](https://shengshuqiang.github.io/assets/keyframesStopOverflowAnimation3.png)

ç°åœ¨è¿˜å‰©ä¸‹æœ€åä¸€ä¸ªé—®é¢˜ï¼Œæœ€åä¸€ä¸ªå·¦æ»‘æ—¶åé¢æ˜¯ç©ºç™½ï¼Œè€Œéœ€æ±‚æ˜¯è½®æ’­ï¼Œå³æœ€åä¸€ä¸ªåé¢æ¥ç€ç¬¬ä¸€ä¸ªï¼Œä¸æ–­å¾ªç¯ã€‚è¿™ä¸ªé—®é¢˜å°±è€ƒåˆ°äº†è½®æ’­çš„å…³é”®äº†ï¼ˆåˆ’é‡ç‚¹ï¼‰ï¼Œæœ‰ç§æœ€ç®€å•åšæ³•å°±æ˜¯å±•ä½å¾ªç¯ç”Ÿæˆ100ä¸ªï¼Œæœ€åä¸€æ¬¡ä¼šæ»šåŠ¨å‡ºç©ºç™½ï¼Œä¸è¿‡ä¸€èˆ¬ç”¨æˆ·ä¸ä¼šçœ‹åˆ°ï¼Œæ‰€ä»¥å¾ˆéš¾å‘ç°ï¼Œå‹‰å¼ºèƒ½æ··è¿‡å»ã€‚è¯¦è§å¦‚ä¸‹[keyframes&åœä¸‹å†æ»šåŠ¨&è¶…å‡ºä¸æ˜¾ç¤ºåŠ¨ç”»&å¤šç»„ä»¶å¾ªç¯ç¤ºä¾‹](https://shengshuqiang.github.io/assets/h5/keyframesStopOverflowAnimation3.html)ï¼š
<br>![](https://shengshuqiang.github.io/assets/keyframesStopOverflowManyAnimation4.gif)
<br>![](https://shengshuqiang.github.io/assets/keyframesStopOverflowManyAnimation4.png)

æ˜¾ç„¶ï¼Œè¿™ç§å‹‰å¼ºæ··æ—¥å­çš„æ–¹æ¡ˆå…¥ä¸äº†çœ¼ï¼Œå…¶å®è¿™ä¸ªé—®é¢˜æœ¬èº«å¾ˆç®€å•ï¼Œè‡ªå·±åœ¨çº¸ä¸Šç”»ä¸€ä¸‹å°±å‡ºæ¥äº†ã€‚
    
    1. å°¾éƒ¨è‚¯å®šè¦åŠ ä¸Šç¬¬ä¸€ä¸ªå±•ä½ï¼Œå¦åˆ™æœ€åä¸€ä¸ªå·¦æ»‘å°¾éƒ¨æ˜¯ç©ºç™½ã€‚
    2. è¿™ä¸€æ­¥ä¹Ÿæ˜¯æœ€å…³é”®çš„ä¸€æ­¥ï¼Œå…¶å®å•¥ä¹Ÿä¸ç”¨å¹²ï¼Œå› ä¸ºæ­¤åˆ»å›å¤åˆ°æœ€åˆçŠ¶æ€ï¼Œæœ€åä¸€ä¸ªå’Œç¬¬ä¸€ä¸ªéƒ½æ˜¯ç¬¬ä¸€ä¸ªå±•ä½å†…å®¹ï¼Œå› ä¸ºå†…å®¹ä¸€æ ·ï¼Œä¸ä¼šäº§ç”Ÿè§†è§‰è·³å˜ï¼Œè™½ç„¶å®é™…ä¸Šçš„ç¡®å˜æ¢äº†ã€‚

ç¨å¾®ç”¨ä¸‹é¢ä¸€å¼ åˆ†è§£å›¾å°±ç†è§£äº†ã€‚

![](https://shengshuqiang.github.io/assets/carousel-tail-change-diagram.png)

å…·ä½“è¯¦è§å¦‚ä¸‹[keyframes&åœä¸‹å†æ»šåŠ¨&è¶…å‡ºä¸æ˜¾ç¤ºåŠ¨ç”»&åŠ ä¸€ç»„ä»¶å¾ªç¯ç¤ºä¾‹](https://shengshuqiang.github.io/assets/h5/keyframesStopOverflowPlusOneAnimation5.html)ï¼š
<br>![](https://shengshuqiang.github.io/assets/keyframesStopOverflowPlusOneAnimation5.gif)
<br>![](https://shengshuqiang.github.io/assets/keyframesStopOverflowPlusOneAnimation5.png)

## ä»»æ„å±•ä½ä¸ªæ•°çš„åŠ¨æ€è½®æ’­CSSåŠ¨ç”»

ä¸Šé¢çš„æ ·å¼æ˜¯å†™æ­»åœ¨htmlæ–‡æ¡£é‡Œï¼Œä¸æ»¡è¶³éœ€æ±‚ä¸­è¦æ±‚çš„æœåŠ¡ç«¯ä¸‹å‘ä»»æ„ä¸ªæ•°ï¼Œè¿™ä¸ªæ€è·¯æ¯”è¾ƒç®€å•ï¼Œæ ¹æ®æœåŠ¡çš„ä¸‹å‘çš„å±•ä½ä¸ªæ•°ä½¿ç”¨ä»£ç ç”ŸæˆCSSæ ·å¼å°±å¯ä»¥äº†ï¼Œè¿™ä¹ˆä¸ªé€šç”¨é—®é¢˜è‚¯å®šæœ‰ç°æˆæ–¹æ¡ˆï¼ŒGoogleæœç´¢ä¸€ä¸‹å…³é”®å­—â€œåŠ¨æ€ç”Ÿæˆkeyframesâ€ï¼Œæ¯”è¾ƒä¸‹æ‰¾åˆ°äº†ä¸€ç¯‡[åŠ¨æ€æ›´æ”¹keyframes](https://blog.wangpengpeng.site/2020/06/19/%E5%8A%A8%E6%80%81%E6%9B%B4%E6%94%B9keyframes/)ã€‚

ç¬¬ä¸€æ­¥è‚¯å®šæ˜¯å¦‚ä½•ä½¿ç”¨ä»£ç ç”Ÿæˆç›®æ ‡CSSæ ·å¼å†…å®¹ï¼Œè¿™ä¸ªå‚è€ƒé™æ€CSSç…§è‘«èŠ¦ç”»ç“¢ä¿®æ”¹ä¸€ä¸‹å‚æ•°å³å¯ï¼Œè¯¦è§ä¸‹å›¾ä»£ç ç¤ºæ„ã€‚
<br>![](https://shengshuqiang.github.io/assets/buildKeyFramesAndReturnCSSInfo.png)

ç¬¬äºŒæ­¥å°†ç”Ÿæˆçš„CSSåŠ¨ç”»æ ·å¼æ³¨å…¥åˆ°å…¨å±€ä¸Šä¸‹æ–‡ï¼Œç¡®ä¿è®¾ç½®äº†å±æ€§èƒ½ç”Ÿæ•ˆã€‚[åŠ¨æ€æ›´æ”¹keyframes](https://blog.wangpengpeng.site/2020/06/19/%E5%8A%A8%E6%80%81%E6%9B%B4%E6%94%B9keyframes/)åœ¨æˆ‘çš„é¡¹ç›®é‡Œé¢å®æµ‹æœ‰é—®é¢˜ï¼Œç®€å•è¯´å°±æ˜¯é€šè¿‡styleSheet.insertRuleæ’å…¥æ ·å¼ï¼ŒæˆåŠŸçš„å‰ææ˜¯ç›®æ ‡styleSheetæœ¬èº«å·²æœ‰æ ·å¼ï¼Œå³styleSheet.rulesæ•°ç»„éç©ºï¼Œä¸Šè¿°æ–‡ç« ä¹Ÿè¯´åˆ°è¯¥é—®é¢˜ï¼Œä½œè€…é€šè¿‡åœ¨document.styleSheetså°¾éƒ¨styleSheetæ’å…¥çš„rulesæ¥è§„é¿ï¼Œä½†æ˜¯è¿™ç§åœ¨å°¾éƒ¨styleSheet.rulesä¸ºç©ºä¸‹ä¾æ—§æŠ¥â€œUncaught DOMException: Failed to execute 'insertRule' on 'CSSStyleSheet': Cannot access StyleSheet to insertRuleâ€å¼‚å¸¸ã€‚

è¿™ä¸ªå¼‚å¸¸ä»å­—é¢ä¸Šçœ‹æ˜¯æ²¡æœ‰æƒé™ï¼Œå’‹ä¸€çœ‹æ˜¯å…¼å®¹æ€§é—®é¢˜ï¼Œæˆ‘åœ¨æœ¬åœ°Chromeæµè§ˆå™¨è°ƒè¯•æ²¡æœ‰é‡åˆ°ï¼Œå‘å¸ƒå°±å‡ºé—®é¢˜äº†ã€‚Googleä¸Šæœ‰å¾ˆå¤šäººé‡åˆ°ï¼Œå‡ ä¸ªæ–¹æ¡ˆè¯•äº†è¿˜æ˜¯å´©æºƒã€‚å…¶ä¸­[insertRule()è§„åˆ™æ— æ³•æ³¨å…¥](http://www.imooc.com/qadetail/334927)æ–‡ç« è™½ç„¶æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œä½†æ˜¯å¸¦æ¥äº†æ¬¢ä¹ï¼Œä½œè€…æŠ›å‡ºé—®é¢˜ååˆä¸€ä¸ªå›å¤æ˜¯å°†åŠ¨æ€ç”Ÿæˆå†™æˆé™æ€...ï¼Œä½œè€…çš„å›å¤ç»™æˆ‘æ•´ä¹äº†ï¼Œâ€œå›ç­”å¾ˆæ£’ï¼Œä¸‹æ¬¡ä¸è¦ç­”äº†â€ï¼ŒğŸ‘ã€‚

ç»§ç»­æœç´¢ä¸‹å‘ç°äº†[Uncaught DOMException: Failed to execute â€˜insertRuleâ€™ on â€˜CSSStyleSheetâ€™](https://cloud.tencent.com/developer/article/2023111)ï¼Œæ˜¯é€šè¿‡ç”Ÿæˆstyleæ ‡ç­¾æ’å…¥DOMçš„åšæ³•ï¼Œä¸€æ—¶åŠä¼šä¸å¤ªç†è§£ï¼Œæ„Ÿè§‰åƒæ˜¯å¦å¤–ä¸€ç§æ–¹æ¡ˆæ¥ç»•è¿‡ä¸Šé¢é—®é¢˜ã€‚

æ­¤æ—¶å’ŒåŒäº‹æ°¸å¥æ·±å…¥äº¤æµäº†ä¸€ä¸‹ï¼Œç›´æ¥åœ¨å¼‚å¸¸å¤„æ–­ç‚¹ï¼Œå‘ç°document.styleSheetsçš„æœ€åä¸€ä¸ªstyleSheetæ˜¯éå†…è”CSSï¼ˆé€šè¿‡css urlæ‹‰å–åŠ è½½ï¼‰ï¼Œå¯¹åº”rulesä¸ºç©ºï¼Œæ­¤æ—¶æˆ‘æ‰å‘ç°ï¼Œä¸ºå•¥ä¸ç›´æ¥æŠ¥rulesæ•°ç»„ä¸ºç©ºï¼Œéæ•´ä¸ªä¸æ˜è§‰å‰çš„â€œCannot access StyleSheet to insertRuleâ€ï¼Œè®©æˆ‘åœ¨â€œæ²¡æœ‰æƒé™â€çš„å…¼å®¹æ€§é”™è¯¯æ–¹å‘è¿…çŒ›çš„å¥”è·‘ã€‚è¿›ä¸€æ­¥çœ‹ä¸»æ–‡æ¡£htmlçš„DOMæ ‘ï¼Œä¹Ÿçš„ç¡®ä¸€ä¸€å¯¹åº”ï¼Œæˆ‘ä»¬é¡¹ç›®å†…è”CSSæ˜¯ç¬¬ä¸€ä¸ªï¼Œæ‰‹åŠ¨æ”¹æˆç¬¬ä¸€ä¸ªæµ‹è¯•é€šè¿‡ã€‚

æ¥ç€æ°¸å¥è®©æˆ‘é€šè¿‡åˆ›å»ºstyleæ ‡ç­¾çš„æ–¹å¼å°†ç”Ÿæˆçš„CSSæ ·å¼æ³¨å…¥DOMæ ‘ï¼Œè¿™ä¹Ÿå¯ä»¥æœ‰æ•ˆé¿å…styleSheet.insertRuleæ”¹åŠ¨å…¶ä»–ä¸Šä¸‹æ–‡CSSï¼Œæ›´åŠ å®‰å…¨å¯é ï¼Œè‡ªç„¶ä¹Ÿä¸ä¼šæœ‰ä¸Šé¢çš„å¼‚å¸¸ã€‚è¿™ä¸ªæ˜¯ä¸ªç®€å•DOMåŠ styleæ ‡ç­¾åŠ¨ä½œï¼Œä»£ç å¦‚ä¸‹å›¾ï¼š
<br>![](https://shengshuqiang.github.io/assets/appendAnimStyle2DOM.png)

æœ€åé™„ä¸Šå®Œæ•´[åŠ¨æ€ç”ŸæˆCSSè½®æ’­åŠ¨ç”»ç¤ºä¾‹](https://shengshuqiang.github.io/assets/h5/carouselCSSAnimation.html)ï¼š

<video id="video" width="818px" height="427px" controls preload="none" poster="https://shengshuqiang.github.io/assets/carouselCSSAnimationVideoCover.png" src="https://shengshuqiang.github.io/assets/carouselCSSAnimation.mp4" type="video/mp4">
</video>

<br>![](https://shengshuqiang.github.io/assets/carouselCSSAnimation.png)

```xml
<html>

<head>
    <meta charset="utf-8">
    <title>åŠ¨æ€CSSè½®æ’­åŠ¨ç”»</title>
</head>

<body>
    <div style="display: flex; align-items: center; height: 50px; font-size: 20px; padding-top: 50px;">
        <input type="checkbox" style="width: 30px; height: 30px;" id="horizontal" checked="true" onchange="refresh()">
        æ¨ªå‘
        <input type="checkbox" style="width: 30px; height: 30px; margin-left: 30px;" id="overflow-hidden" checked="true"
            onchange="refresh()">
        è¶…å‡ºéšè—
        <button id="plusButton"
            style="display: inline-block; width: 100px; height: 50px; margin-left: 30px; background-color: #FCB526;font-size: 35px;border-radius: 25px;"
            onclick="plus()">+1</button>
    </div>
    <div id="demoDisplay">
        <div id="demoContainer"></div>
    </div>

    <script>
        const palette = ['#863D91', '#F29900', '#F2DE5C', '#F7E9D0', '#B893B6'];
        const ANIM_NAME = 'carousel-anim';

        let count = 0;
        plus();
        function plus(isHorizontal, isOverflowHidden) {
            count++;
            appendItem(isHorizontal);
            refresh();
        }
        function refresh() {
            const isHorizontal = document.getElementById("horizontal").checked;
            const isOverflowHidden = document.getElementById("overflow-hidden").checked;
            const cssInfo = appendKeyFrames(count, isHorizontal, isOverflowHidden);

            let style = `display: flex; width: 160px; height: 160px; margin-left: 420px; margin-top: 120px; padding: 10px; border: 5px dotted black; border-radius: 25px; flex-direction: ${isHorizontal ? 'row' : 'column'};`;
            if (isOverflowHidden) {
                style += "overflow: hidden;";
            }
            document.getElementById("demoDisplay").style = style;

            const itemTitleElementList = demoContainer.getElementsByClassName("item");
            for (let index = 0; index < itemTitleElementList.length; index++) {
                const itemStyle = "width: 150px; height: 150px; background-color: " + getPaletteColor(index % count) + "; text-align: center; line-height: 150px; font-size: 35px; border-radius: 25px; margin-bottom: 30px; margin-right: 30px;" + (isHorizontal ? "flex-shrink: 0;" : "");
                itemTitleElementList[index].style = itemStyle;
            }

            let demoContainerStyle = `display: flex; flex-shrink: 0; border-radius: 25px; padding: 5px; flex-direction: ${isHorizontal ? 'row' : 'column'};`;
            if (cssInfo) {
                appendStyle(cssInfo.cssStr);
                demoContainerStyle += "animation:" + ANIM_NAME + " " + cssInfo.animDuration + "s linear infinite;";
            }
            if (!isOverflowHidden) {
                demoContainerStyle += "border:1px solid gray;";
            }
            document.getElementById("demoContainer").style = demoContainerStyle;
        }
        function getPaletteColor(index) {
            return palette[index % palette.length];
        }
        function createItemElement(isHorizontal, bgColor) {
            const itemDiv = document.createElement("div");
            itemDiv.className = 'item';
            const itemTxt = document.createTextNode('title');
            itemDiv.appendChild(itemTxt);
            return itemDiv;
        }
        function appendItem(isHorizontal) {
            const demoContainer = document.getElementById("demoContainer");
            if (count === 1) {
                demoContainer.appendChild(createItemElement(isHorizontal));
            } else if (count === 2) {
                demoContainer.appendChild(createItemElement(isHorizontal));
                demoContainer.appendChild(createItemElement(isHorizontal));
            } else {
                demoContainer.insertBefore(createItemElement(isHorizontal), demoContainer.lastChild);
            }
            const itemTitleElementList = demoContainer.getElementsByClassName("item")
            for (let index = 0; index < itemTitleElementList.length; index++) {
                const element = itemTitleElementList[index];
                element.textContent = (index % count + 1) + '/' + count;
            }
        }
        function appendKeyFrames(count, isHorizontal, isOverflowHidden) {
            if (count < 2) {
                return;
            }
            // å…¬å…±åŠ¨ç”»å‚æ•°ï¼Œç¡®ä¿æ»šåŠ¨åŒæ­¥
            const scrollTime = 0.5;
            // åœç•™å±•ç¤ºæ—¶é—´
            const displayTime = 2;
            // itemé«˜æˆ–å®½
            const step = 150;
            // itemå‚ç›´æˆ–æ°´å¹³é—´éš”
            const blankStep = 30;

            // æ„é€ åŠ¨ç”»æ ·å¼ï¼Œå¹¶ä¸”è¿”å›CSSå­—ç¬¦å’ŒåŠ¨ç”»æ—¶é—´é—´éš”
            return buildKeyFramesAndReturnCSSInfo(isHorizontal, count, step, blankStep, scrollTime, displayTime);
        }
        function buildKeyFramesAndReturnCSSInfo(isHorizontal, length, step, blankStep, scrollTime, displayTime) {
            const translate = isHorizontal ? 'translateX' : 'translateY';
            const sumTime = displayTime * length + scrollTime * length;
            let sumPercentage = 0;
            let sumTop = 0;
            let cssStr = `@keyframes ${ANIM_NAME}{0%{transform:${translate}(0px);}`;
            for (let index = 0; index < length; index++) {
                // ç¦æ­¢å±•ç¤ºåŠ¨ç”»åŒºæ®µ
                sumPercentage += displayTime / sumTime;
                cssStr += `${(sumPercentage * 100).toFixed(0)}%{transform:${translate}(-${sumTop.toFixed(2)}px);}`;
                // æ»šåŠ¨åŠ¨ç”»åŒºæ®µ
                sumPercentage += scrollTime / sumTime;
                sumTop += step + blankStep;
                cssStr += `${(sumPercentage * 100).toFixed(0)}%{transform:${translate}(-${sumTop.toFixed(2)}px);}`;
            }
            cssStr += '}';

            return {
                animDuration: sumTime,
                cssStr,
            };
        };
        function appendStyle(cssStr) {
            // å°†CSSæ ·å¼ä¿¡æ¯å†™å…¥dom headèŠ‚ç‚¹
            const head = document.head || document.getElementsByTagName('head')[0];
            const style = document.createElement('style');
            style.type = 'text/css';
            if (style.styleSheet) {
                style.styleSheet.cssText = cssStr;
            } else {
                style.appendChild(document.createTextNode(cssStr));
            }
            head.appendChild(style);
        }
    </script>

</body>

</html>
```